{% extends "base.html" %}


{% block title %}Impressle | @{{ user_profile.username }}{% endblock %}

{% block content %}
    <h1 id="page-title">
        @{{ user_profile.username }}'s Profile
    </h1>


    <p id="page-subtitle">
        <b>
            Just some info about this user
        </b>
    </p>


    <hr />


    <div id="profile">
        <div
            class = "card"
            id = "profile-info"
        >
            <div class="pure-g">
                <div class="pure-u-1-2">
                    <h1 align="left">
                        <img
                            class = "pfp pure-img"
                            alt = "Profile Picture"
                            src = "{{ url_for('static', filename='images/user.svg') }}"
                        />
                        @{{ user_profile.username }}


                        {% if user_profile.rank == "Admin" %}
                            <span style="color: #7f00ff">
                                [ ADMIN ]
                            </span>
                        {% endif %}

                        {% if user_profile.status == "inactive" %}
                            <span style="color: #ff7f00">
                                [ INACTIVE ]
                            </span>
                        {% elif user_profile.status == "banned" %}
                            <span style="color: #ff0000;">
                                [ BANNED ]
                            </span>
                        {% endif %}
                    </h1>
                </div>
                <div class="pure-u-1-2" >
                    <p
                        align = "right"
                        class = "followers"
                    >
                        {% if user_profile.show_followers %}
                            <span>
                                <span class="followers-count" id="followers-count-{{ user_profile.uid }}">
                                    {{ user_profile.follows|length }}
                                </span>
                                Followers
                            </span>
                        {% endif %}

                        {% if user.uid != user_profile.uid %}
                            {% if user.uid in user_profile.follows|map(attribute="follower_uid")|list %}
                                <button
                                    onclick = "follow({{ user_profile.uid }})"
                                    id = "follow-button-{{ user_profile.uid }}"
                                    class = "button following pure-button button-main"
                                >
                                    Unfollow
                                </button>
                            {% else %}
                                <button
                                    class = "button not-following pure-button button-main"
                                    id = "follow-button-{{ user_profile.uid }}"
                                    onclick = "follow({{ user_profile.uid }})"
                                >
                                    Follow
                                </button>
                            {% endif %}
                        {% endif %}
                    </p>
                </div>
            </div>


            <hr />


            <h2 id="about-me">
                About Me
            </h2>

            <p>
                {% if user_profile.about_me %}
                    {{ user_profile.about_me }}
                {% else %}
                    <i>
                        Nothing yet...
                    </i>
                {% endif %}
            </p>


            <hr />


            <h2>
                Account Details
            </h2>

            <div id="details">
                <div class="pure-g">
                    <div class="pure-u-1-4">
                        <h3 id="user-id">
                            User ID
                        </h3>

                        <p>
                            {{ user_profile.uid }}
                        </p>
                    </div>

                    <div class="pure-u-1-4">
                        <h3 id="account-created">
                            Account Created
                        </h3>

                        <p>
                            {{ user_profile.date_created }}
                        </p>
                    </div>

                    <div class="pure-u-1-4">
                        <h3 id="rank">
                            Rank
                        </h3>

                        <p>
                            {{ user_profile.rank }}
                        </p>
                    </div>

                    <div class="pure-u-1-4">
                        <h3 id="">
                            Karma
                        </h3>

                        <p>
                            {{ user_profile.karma }}
                        </p>
                    </div>
                </div>
            </div>


            {% if user.uid == user_profile.uid %}
                <div id="edit-profile">
                    <hr />


                    <button class="pure-button button-main">
                        <a href="{{ url_for('views.user_settings') }}">
                            Edit Profile
                        </a>
                    </button>
                </div>
            {% endif %}
        </div>
    </div>


    {% if user_profile.pictures|count > 0 %}
        <h1>
            @{{ user_profile.username }}'s Pictures
        </h1>


        <hr />


        <div id="pictures">
            {% for picture in pictures %}
                {% include "div_picture.html" %}
        
                <br />
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}
